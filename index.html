<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				height: 100vh;
				display: grid;
				place-items: center;
				background: hsl(0, 0%, 96%);
			}

			svg {
				width: 75vmin;
				height: 75vmin;
				background: hsl(0, 0%, 100%);
			}
		</style>
		<script type="module">
			import { SVG } from "https://cdn.skypack.dev/@svgdotjs/svg.js";
			import {
				spline,
				random,
				pointsInPath,
			} from "https://cdn.skypack.dev/@georgedoescode/generative-utils@1.0.0";

			const half = (value) => value / 2;

			const WIDTH = 300;
			const HEIGHT = 300;
			const draw = SVG()
				.addTo("body")
				.size(WIDTH, HEIGHT)
				.viewbox(0, 0, WIDTH, HEIGHT);

			const CENTER = { x: half(WIDTH), y: half(HEIGHT) };

			var horizontalLeft = draw
				.line(CENTER.x, CENTER.y, 0, CENTER.y)
				.stroke({ color: "blue", width: 1, linecap: "round" });

			var diagonalA = draw
				.line(CENTER.x, CENTER.y, 0, 0)
				.stroke({ color: "blue", width: 1, linecap: "round" });

			var verticalTop = draw
				.line(CENTER.x, CENTER.y, CENTER.x, 0)
				.stroke({ color: "blue", width: 1, linecap: "round" });

			var diagonalB = draw
				.line(CENTER.x, CENTER.y, WIDTH, 0)
				.stroke({ color: "blue", width: 1, linecap: "round" });

			var horizontalright = draw
				.line(CENTER.x, CENTER.y, WIDTH, CENTER.x)
				.stroke({ color: "blue", width: 1, linecap: "round" });

			var diagonalC = draw
				.line(CENTER.x, CENTER.y, WIDTH, HEIGHT)
				.stroke({ color: "blue", width: 1, linecap: "round" });

			var verticalBottom = draw
				.line(CENTER.x, CENTER.y, CENTER.x, HEIGHT)
				.stroke({ color: "blue", width: 1, linecap: "round" });

			var diagonalD = draw
				.line(CENTER.x, CENTER.y, 0, HEIGHT)
				.stroke({ color: "blue", width: 1, linecap: "round" });

			const lines = [horizontalLeft, diagonalA, verticalTop, diagonalB, horizontalright, diagonalC, verticalBottom, diagonalD, horizontalLeft];

			const STEPS = 5;
			const step = HEIGHT / STEPS;
			const radius = 5;

			const verticalAxis = [];
			const horizontalAxis = [];

			const anchors = [];

			lines.forEach((line) => {
				anchors.push(pointsInPath(line.node, 15).map(({ x, y }) => ({ x, y })));
			});

			const drawCurveBetween = (A, B, offset = 30) => {
				const midPointBetween = (A, B) => {
					return {
						x: (B.x + A.x) * 0.5,
						y: (B.y + A.y) * 0.5,
					};
				};

				const M = midPointBetween(A, B);
				var theta = Math.atan2(B.y - A.y, B.x - A.x) - Math.PI / 2;

				var C = {
					x: M.x - offset * Math.cos(theta),
					y: M.y - offset * Math.sin(theta),
				};

				var curve = `M${A.x} ${A.y} Q${C.x} ${C.y} ${B.x} ${B.y}`;

				draw.path(curve).stroke("#f06").fill("none");
			};

			anchors.forEach((points, index) => {
				points.forEach((point, pointIndex) => {
					const start = point;
					if(!anchors[index + 1]) return
					const end = anchors[index + 1][pointIndex];
					const distanceTocenter = Math.abs(STEPS / 2 - index);
					const offset = pointIndex * 2;
					drawCurveBetween(start, end, offset);
				});
			});
		</script>
	</body>
</html>